# 머신러닝, 딥러닝을 위한 파이썬 정리

## - Module



### Module

- 하나의 python 파일로 `module.py` 의 모양을 가진다.
- 지금 현재까지 사용했던 파일의 확장자는 `.jpynb` 이다.
- module은 변수, 함수, 클래스를 저장하고 있는 파일이다.

- 재사용성과 관리가 좋음
- python의 모든것은 객체이고, module역시 객체이다.
- Keyword : `import`



### 만드는 방법

- 만들기전 환경설정
  - code상으로 설정하는 방법 (1회성)
  - 시스템적으로 환경변수를 이용해서 설정하는 방법 (영구적)
    - 모듈은 한 군데에 모아놔야 한다.
    - C드라이브에 python_lib 폴더 생성 (원하는 곳에 생성 해도 됨)
    - 내 PC의 속성 - 고급 시스템 설정 - 환경변수 -  사용자에 대한 환경변수 새로만들기
    - 환경변수 이름(고정 값) : PYTHONPATH, 환경변수 값(본인의 폴더 경로): C:\python_lib
    - 이 폴더 말고도 모듈파일이 다른곳에도 있지만 파이썬이 여기'도' 찾아서 모듈이 있는지 확인한다.
    - 원래 각각의 APP(프로그램, anaconda, python 등,,)들은 **시작할 때** 환경변수를 읽어와서 사용
    - 따라서 지금 환경변수 추가했다면 현재 jupyter notebook, anaconda도 재실행 해야 한다.

- 위에서 만든 python_lib폴더에 텍스트문서 하나 만든다.
  - 확장명은 txt대신 py로 바꾸고 이름은 임의로 module1.py라 하겠다 하고 연다.
  - notepad++ (없으면 깔면 좋다)를 이용해서 연다.
  - 안에 내용은 다음과 같이 작성하였다.

```python
# 변수
my_PI = 3.141592

# 함수
def my_func(a,b):
    return a + b

# class
class my_car(object):

    def __init__(self, maker, cc):
        self.maker = maker
        self.cc = cc
```

### 모듈을 불러보자

jupyter note book으로 돌아가서 `import module1` 를 작성한다. 경로는 이미 잡혀있고, 확장자는 쓰지 않는다.

```python
import module1

print(module1.my_PI)
print(module1.my_func(100, 200))

car_1 = module1.Car('KIA', 2000)

print(car_1.cc)
------------------------------------------------------------------------------
3.141592
300
2000
```

중간에 모듈내용을 수정하면 jupyter에서 바로 반영이 안될 수 있으므로 상단에 Kernel Restart해주면 된다.

### 모듈의 응용

```python
import module1 as m1 # 이제부터 module1대신 m1으로 쓰겠다.

print(m1.my_PI)
print(m1.my_func(100, 200))

car_1 = m1.Car('KIA', 2000)

print(car_1.cc)
------------------------------------------------------------------------------
3.141592
300
2000
```

alias는 거의 항상 잡는다. 모듈명이 길기 때문.



`from {모듈이름} import {함수, 변수, 클래스} ` 다음과 같이 일부만 가져올 수 있다.

``` python
from module1 import my_PI #다른건 안가져오고 my_PI라는 변수만 가져오겠다.

print(my_PI) #변수를 그냥 들고왔기 때문에 그냥 사용 하면 된다.
------------------------------------------------------------------------------
3.141592
```



`*` 을 통해 그 안에 있는 모든 것을 가져올 수 있다. 앞에서와 무엇이 다르냐 할 수 있는데, 모든 것을 **가져온것**이기 때문에 module1이라는 이름을 달고 다니지 않고 쓸 수 있다.

```python
from module1 import *
print(my_PI)
print(my_func(100, 200))

car_1 = Car('KIA', 2000)

print(car_1.cc)
------------------------------------------------------------------------------
3.141592
300
2000
```



### 모듈의 관리

위와 같은 방식으로 module을 만들어서 사용하면 편리하고 좋다.

그럼 module을 관리하는 입장에서 살펴보자!

만약 모듈을 폴더안에 엄청나게 저장해놨다면, 우리는 모듈을 어떻게 찾을까?

- 모듈의 종류
  - Database
  - Netweork
  - Concurrency

다음과 같이 모듈이 어떤 카테고리 안에 들어가 있을 확률이 높다. 

=> 따라서 우리가 모듈을 만들 때에도 어떤 카테고리에 속하도록 잘 저장해야한다.

module을 **계층적으로 관리**하는게 좋다는 뜻이다.

폴더를 계층화 시켜서 특정 module을 역할에 맞는 폴더에 넣어서 관리하면 된다.

이렇게 계층적으로 잘 묶은것을 **package** (module을 담고 있는 폴더)라고한다.

- package : python에서 .(계층구조를 표현)을 이용해서 python module을 관리

- `import A.B` : A는 package명, B는 모듈명



### 실습

1. python_lib폴더에 myFolder라는 폴더(=패키지)를 만든다.
2. myFolder라는 폴더안에 myModule이라는 폴더(=패키지)를 만든다.
3. 아까 만든 module1.py를 myModule폴더안에 넣어보자. (내가 만든 모듈을 패키지화 하는 중)

아까 설정으로 잡아 놓은 폴더는 python_lib이므로 이 위치부터 시작이다.

```python
import myFolder.myModule.module1 #풀 패키지 명

print(myFolder.myModule.module1.my_PI)
------------------------------------------------------------------------------
3.141592
```

아까보다 적어야 하는게 너무 길어졌다. 위에서 배운 `as`키워드를 통해 줄일 수 있다.

```python
from myFolder.myModule import module1

print(module1.my_PI)
------------------------------------------------------------------------------
3.141592
```

거의 모든 모듈은 패키지화 되어 있기 때문에 위와 같은 방법이 **일반적인 모양**이다.

이 역시 as를 쓰면 줄일 수 있다.

- as를 쓰는 것도 주의해야 한다. 겹치는 단어를 사용하면 안되기 때문에 항상 쓰는 것이 바람직하지 않을 수도 있다.



직접 만든 것이 아닌 이미 기능이 잘 갖추어져 있는 모듈도 가져다 써보자.

- 모듈은 외장 module과 내장 module로 구분된다.
- 내장 module: 이미 python안에 포함되어 있는 module, 따로 설치 안해도 python과 함께 설치
- 외장 module: 외부 Repository라고 불리는 곳에 module이 들어 있고 다운로드해서 사용한다.

- 내장 모듈도 당연히 `import`키워드는 써야한다.



내장으로 들어 있는 sys라는 모듈을 사용해보자. sys는 시스템 설정할 때 쓰는 모듈이다.

```python
import sys
sys.path.append('C:/python_lib')
# 역슬래시 아님 주의!
# 경로를 제대로 잡아주자
from myFolder.myModule import module1
print(module1.my_PI)
------------------------------------------------------------------------------
3.141592
```

위에서 코드상에서 할 수 있는 방법이 있다고 했는데,  그방법이다.

아까 위에서 환경변수설정대신 그것을 대신해주는 코드이며 **1회성**이다.
