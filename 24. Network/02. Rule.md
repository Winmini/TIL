# Rule



네트워크에서도 당연히 지켜야 하는 규칙이 있다. 이에 대해 알아보자.

#### 프로토콜

네트워크에서 문제없이 통신하기 위해 규칙(약속)을 지켜야 한다. 각기 다른 나라 사람들이 다 다른 언어를 사용하면 대화할 수 없으므로, 모두 알아들을 수 있는 언어로 대화를 해야 한다. 그러기 위해 만들어진 규칙이 프로토콜이다. 이 자세한 규칙은 추후에 배우도록 하자.



#### OSI 모델과 TCP/IP 모델

**OSI 모델**

서로 다른 컴퓨터끼리 통신이 가능하려면 케이블을 연결하는 커넥터부터 필요한 다양한 것들에 공통으로 사용할 **표준 규격**이 필요하다. 국제 표준화기구인 ISO에서 **OSI모델**이라는 표준 규격을 제정했다. 네트워크 기술의 기본이 되는 모델이다. 데이터의 송수신은 컴퓨터에서 컴퓨터로 데이터를 전송하는데, 이 때 컴퓨터 내부에서는 여러 가지 일들을 한다. 그 일들을 일곱 개의 계층으로 나누어서 하며, 그 계층이 OSI모델이며, 계층 대신 레이어라고도 한다.

1. 물리 계층: 시스템 간의 물리적인 연결과 전기 신호를 변환 및 제어
2. 데이터 링크 계층: 네트워크 기기 간의 데이터 전송 및 물리 주소를 결정
3. 네트워크 계층: 다른 네트워크와 통신하기 위한 경로 설정 및 논리 주소를 결정
4. 전송 계층: 신뢰할 수 있는 통신을 구현
5. 세션 계층: 세션 체결, 통신 방식을 결정
6. 표현 계층: 문자 코드, 압축, 암호화 등의 데이터를 변환
7. 응용 계층: 이메일 & 파일 전송, 웹 사이트 조회 등 애플리케이션에 대한 서비스를 제공

데이터를 송신하는 쪽은 7계층부터 1계층으로 데이터를 전달한다. 그리고 수신하는 쪽은 1계층부터 7계층으로 전달받는다. 그리고 이 계층은 독립적으로 서로 영향을 끼치지 않는다.

**TCP/IP 모델**

TCP/IP 모델은 4계층으로 이루어져 있다.

1. 네트워크 접속 계층(1~2)
2. 인터넷 계층(3)
3. 전송 계층(4)
4. 응용 계층(5~7)

이렇게 합쳐져서 위와 비교될 수 있다. 그리고 각 계층이는 다양한 프로토콜들이 있다.



#### 캡슐화와 역캑슐화

컴퓨터 A에서 컴퓨터 B로 데이터를 보낸다고 해보자. 데이터를 보내려면 데이터의 앞부분에 전송하는 데 필요한 정보를 붙여서 다음 계층으로 보내야 한다. 이 정보를 헤더라고 하며 이 **헤더**에는, 데이터를 전달받을 **상대방에 대한 정보도 포함**되어 있다. 이렇게 헤더를 붙여 나가는 걸 캡슐화라고 하고, 받는 쪽에서는 헤더를 하나씩 제거해야 하는데, 이를 역캡슐화라고 한다. OSI 모델로 캡슐화와 역캡슐화를 이해해보자.

데이터를 송신하는 쪽은 응용계층에서 데이터를 전송계층으로 보낸다. 전송 계층은 이 데이터에 헤더를 붙이고, 네트워크 계층으로 보내며 네트워크 계층도 이 데이터에 헤더를 붙여서 데이터 링크 계층에 보낸다. 이 데이터 링크 계층에서는 이 데이터에 또 다시 헤더와 **트레일러**(데이터의 마지막에 추가하는 정보)를 붙여서 물리 계층으로 보내며 받은 물리 계층에서는 이 데이터를 전기신호로 전송한다. 그리고 수신 측은 이게 반대로 일어난다.



**참고**

VPN은 가상 사설망이다. 가상 통신 터널을 만들어 기업 본사나 지사와 같은 거점 간을 연결하여 통신하거나 외부에서 인터넷으로 사내에 접속하는 것을 말한다. 예를 들어 서울에 본사가 있고 부산에 지사가 있으면 본사 내부 랜에서 지사 내부 랜에 접속해서 통신하는 것은 물리적인 거리가 멀어 어렵다. 이럴 때 VPN을 사용하여 연결해서 통신할 수 있다.

- 인터넷 VPN: 인터넷 VPN에는 거점 간 접속과 원격 접속 연결이 있다. 둘 다 인터넷 망을 사용하며 거점간 접속은 IPsec이라는 암호 기술 프로토콜을 사용하여 접속한다. 반면 원격 접속 연결은 외부에서 사용하는 컴퓨터와 사내 네트워크를 연결하기 때문에 암호화된 통신로를 만든다.
- IP-VPN: MPLS라는 기술을 사용하며 인터넷망이 아닌 통신 사업자 전용 폐쇄망을 사용한다. 그래서 해킹이나 데이터 변조의 위험이 없어 암호화가 필요 없다.