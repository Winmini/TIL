# OSI - Layer 5~7

응용 계층에 대해 알아보자.



#### 역할

웹 사이트를 보거나 메일을 보내고 받을 때 애플리케이션을 사용한다. 웹 페이지를 볼 때는 엣, 크롬, 사파리 등 **웹 브라우저**를 사용하고 메일을 보내고 받을 때는 Outlook 같은 **메일 프로그램**을 사용한다. 이렇게 애플리케이션은 사용자가 하고 싶은 일을 할 수 있도록 도와준다. 사용자처럼 서비스를 요청하는 쪽을 **클라이언트**, 브라우저나 프로그램처럼 서비스를 제공하는 쪽을 **서버**라고 한다.

서비스를 제공하는 측인 서버에는 웹 서버 프로그램, 메일 서버 프로그램 등이 있고, 이러한 애플리케이션은 **응용 계층**에서 동작한다.

응용 계층에서는 클라이언트의 요청을 전달하기 위해 통신 대상(서버 등)이 이해할 수 있는 메시지로 변환하고 전송계층으로 전달하는 역할을 한다. 그래서 클라이언트 측 애플리케이션이 서버 측 애플리케이션과 통신하려면 **응용계층의 프로토콜**이 필요하다. 웹사이트를 볼 때는 **HTTP**, 파일을 전송할 때는 **FTP**, 메일을 보낼 때는 **SMTP**, 메일을 받을 때는 **POP3**라는 프로토콜을 사용한다. 또한 네트워크에서 장비에 붙여진 이름을 기반으로 IP 주소를 알아내는 것을 이름 해석이라 하는데, 이를 위해 **DNS**를 사용한다.



정리하면

- 응용 계층: HTTP, DNS, FTP, SMTP, POP3, 기타
- 전송 계층: TCP, UDP
- 네트워크 계층: IP 등
- 데이터 링크 계층: 이더넷
- 물리 계층: 전기 신호 변환



#### 웹 서버의 구조(웹 사이트 접속)

인터넷에서 핵심적인 역할을 하는 **WWW** 에 대해 알아보자. 줄여서 W3나, 웹이라고ㅇ도 부른다. WWW는 HTML, URL, HTTP라는 세 가지 기술이 사용된다.



**HTTP**

클라이언트는 웹 사이트를 보기 위해 서버의 80번 포트를 사용하여 HTTP 통신을 한다. 클라이언트는 서버로 HTTP request를 보내고, 서버는 클라이언트에게 HTTP response를 반환한다. 데이터를 요청할 때는 "GET"이라는 요청을 보내면 서버는 응답으로 "OK"를 반환하고 html을 보내준다.

원래 HTTP/1.0버전에서는 연결, 요청, 응답 연결 끊기 순으로 진행되었는데 너무 느리다보니 keepalive를 도입한다. 연결을 한 번 수립하면 데이터 교환을 마칠 때까지 유지하고, 교환을 모두 끝내면 연결을 끊는 구조다. 또한 HTTP/1.1 버전은 요청을 보낸 순서대로 응답을 반환했다. 하지만 이런 경우, 이전 요청을 처리하는 데 시간이 길어지면 다음 요청에 대한 처리가 늦어진다. 그래서 HTTP/2 버전은 요청을 보낸 순서대로 응답을 반환하지 않는다.



#### DNS 서버의 구조

기본적으로 컴퓨터에는 IP 주소가 있어서 인터넷을 통해 웹 서버에 접속하여 웹 사이트를 볼 수 있었다. 근데 우리는 주소창에 IP 주소를 입력하지 않고 `www.naver.com` 같은 **URL**을 입력한다. IP가 아니여도 웹 사이트에 접근할 수 있는 이유가 DNS 덕분이다. URL을 IP 주소로 변환하는 서비스다. 이를 이용하면 외우기 어려운 IP 값 대신 좀 더 외우기 편한 DNS를 외우면 되고, 바뀔 수 있는 IP 문제도 방지해준다.



#### 메일 서버의 구조

메일의 송수신 구조에 대해 알아보자. 메일을 송수신하려면 클라이언트 측의 메일 프로그램과 서버 측의 메일 서버 프로그램 간에 통신을 해야 한다. 그 때 사용되는 프로토콜에는 2가지가 있다.

메일을 보내는 데 사용되는 프로토콜은 SMTP고, 메일을 받는 데 사용되는 프로토콜은 POP3이다. 전자는 포트 번호 25번, 후자는 110번을 사용한다. 컴퓨터 -> 서버 (SMTP), 서버 -> 서버(SMTP), 서버 -> 컴퓨터(POP3) 이렇게 사용된다.