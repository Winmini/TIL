# 머신러닝, 딥러닝을 위한 Server

## - Ajax

서버의 얘기를 주로 하기위해 서버라는 별도의 카테고리를 만들었지만 아직은 JQuery에 더 가깝기는 하다. 그래서 JQuery실습을 더 할것이다.



전통전인 웹 동작 방식에 대해서부터 이야기해보자. (Round Trip방식)

**Client Side**                                                                   

Web Client(Web browser)

- HTML, CSS, JavaScript Engine

- 서버쪽으로 Requset를 보냄(URL을 이용) 

  - 참고: Requset방식은 목적에 따라 4개로 나뉜다.

    - Get, Post, Put, Delete

    하지만 특정 목적이 없다면 Get, Post를 쓴다.

**Server Side**

Web Server 프로그램이 request를 받는다. 이 프로그램이 project들, file들을 관리하고 있는데, Request를 받아서 적절한 프로젝트, HTML을 찾아서 코드를 보내준다.

이 프로젝트안에 HTML, CSS, javaScript만 있다면, 바로 Client로 Response를 준다. 만약 클라이언트가 HTML을 받았는데 이 HTML코드안에 `<link href="~.css">`,`<script src="~.js">`  가 있다면 또 이 파일을 찾아가기 위해 Client는 requset를 Server에 보내고 또 다시 response를 받는 작업이 굉장히 활발하게 일어난다. 그 외에도 img파일이 있다면 프로그램에 보내고, CDN을 이용했다면 또 다른 프로그램을 향해 Request를 보내야 하는 것이다.

**여기서 문제점이 발생하는 것이다.**

이 어마무시한 Request와 Response로 인해 네트워크 사용량이 크다. 이전에는 괜찮았지만, 모바일 네트워크로 넘어오면서 너무 많아졌다. 따라서 요금이 부여되기 시작했다. 

모바일 Network 시대가 되면서 Data(Packet)가 돈이 되었다. 

따라서 적은 데이터 사용량을 원하게 되고 어떻게 줄일 수 있을까 생각하게 된다.



사실 과거에는 웹서버 프로그램 Project에 HTML, CSS, Javascript외에도 우리가 Python program을 만들어 서버에 올릴 수 있었고. 이런 프로그램을 Web applicaion이라 하였다. 관리할 것이 많이 너무 부담이 되자 현재는 웹서버가 Static한 내용만 service하도록 한다. 입력을 어떻게 주냐에 따라 결과가 달라지는 Dinamic program을 지원하지 않도록 하였다.

그럼 Dinamic program은 어떻게 할까? WAS(Web Application Sever)라는 Web Application을 실행시켜주는 서버를 별도로 프로그램을 만들어 관리하게 된다. 



정리해보면 Requset는 무조건 Web Server가 받는다. 여기서 static이라면 바로 response를 해주고, 만약 Requset 내용중 웹 어플리케이션을 실행시켜서 결과를 알려달라! 라는 요청이 있다면 Web Server는 이 것을 하지못한다. 그래서 Web Server가 WAS에게 그 Request내용을 그대로 전달한다. WAS는 Database(MySQL같은 것)를 통해 데이터를 주고 받아 데이터 처리를 한 후 다시 Web Server에 전달하게 된다.



네트워크 사용량은 단점이지만 모든 처리가 서버쪽에서 일어난다. 그래서 프로그램만들기가 그렇게 어렵지 않다. 



### 개선된 모델

Ajax기반의 single page application model

Client에서 request를 Web server를 보내면 HTML, CSS, Javascript로 구성된 <u>웹페이지가 아닌 웹프로그램</u>(front-end Web application)을 보내준다. 그래서 Client에서 <u>프로그램</u>이 실행된다. 그레서 크롬에서 프로그램을 실행하는 것처럼 된다.

이 프로그램이 실행되는 와중에 데이터가 없으면 서버에 데이터를 보내달라고 Request를 보낸다. 이 request는 html, css를 요청하는게 아니므로 WAS로 넘어가고 WAS에서 프로그램(Back-end Web application)이 DB를 통해 DATA를 돌려주게 된다.

아까와의 차이점은?

아까는 계속 html과 css, java가 계속 주고받았지만 이제는 프로그램을 브라우저에서 실행하면 되므로 처음을 제외하고는 Request와 Response에 <u>data만</u> 주고받게 된다. 그래서 두번째부턴 html과 css파일들을 주고받지 않으므로 네트워크사용량이 줄어든다.

data만 주고받는 통신방식이 바로 **Ajax**(순수 javascript 통신방식)이다. JQuery를 이용하여 쉽고 직관적으로 사용해 보도록하자.

front-end web applicaion은 역사가 짧아서 잘하는 사람이 별로 없고 어렵다. 이것을 직접 만들기에는 무리가 있어서 패스한다. 

back-end web application도 필요하므로 Open API를 이용할 것이다.
