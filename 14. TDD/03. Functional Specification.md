# Functional Specification



#### 기능 명세

개발자는 코드를 작성하고 빌드하여 이를 사용자가 사용할 수 있게 배포하다. 우리가 코드를 작성하는 이유는 사용자가 사용할 어떤 기능을 제공하기 위함이다.

기능에 대한 명세는 다양한 형태로 존재한다. 파워포인트를 이용한 스토리보드 형태도 있고 이메일과 같은 간단한 문장 혈태도 있다. 지라와 같으느 이슈를 통해 받기도 하며, 회의 자리에서 기능 명세를 구두로 전달받을 때도 있다.

어찌됐든 기능을 구현하려면 기능을 크게 두 가지로 나누어 생각할 수 있다. 입력과 결과이다. 예를 들어 로그인기능을 생각해보자.

- 입력: 아이디와 암호
- 결과: 아이디와 암호가 일치하면 성공, 일치하지 않으면 실패

입력은 기능을 실행하는데 필요한 값이고, 그로 인해 나오는 모든 경우의 수이다.

입력은 보통 메서드의 파라미터로 전달하고, 결과는 리턴 값을 사용한다. 기능 실행 결과에는 변경도 포함된다. 예를 들어 회원 가입 기능은 실행 결과로 DB에 회원 정보를 추가한다. DB에 데이터를 추가하는 것은 값을 리턴하는 것과 달리 시스템의 상태를 변경한다. 이런 변경은 리턴 값으로는 결과를 알 수 없기 때문에 테스트 대상을 실행한 뒤에는 변경 대상에 접근해서 결과를 확인해야 한다. 동일한 아이디가 존재하는 상황, 가입에 성공하는 상황 등 여러 상황이 존재하게 된다.

설계는 기능 명세로부터 시작한다. 스토리보드를 포함한 다양한 형태의 요구사항 문서를 이용해서 기능 명세를 구체화한다. 기능 명세를 구체화하는 동안 입력과 결과를 도출하고 이렇게 도출한 기능 명세를 코드에 반영한다. 기능 명세의 입력과 결과를 코드에 반영하는 과정에서 기능의 이름, 파라미터, 리턴 타입 등이 결정된다.



#### 설계 과정을 지원하는 TDD

TDD는 테스트를 만드는 것부터 시작한다. 테스트 코드를 먼저 만들고 테스트를 통과시키기 위해 코드를 구현하고 리팩토링하는 과정을 반복한다. 여기서 중요한 것은 테스트 코드를 가장 먼저 작성해야 한다는 점이다. 여기서 테스트 코드를 만들기 위해 필요한 것은 두가지이다.

- 테스트할 기능을 실행
- 실행 결과를 검증

먼저 기능을 실행할 수 없으면 테스트를 할 수가 없다. 테스트는 기능을 실행한 결과를 검증하는 것이므로 테스트 코드에서 기능을 실행할 수 있어야 한다. 즉, 테스트에서 실행할 수 있는 객체나 함수가 존재해야 한다.

결국 테스트할 객체를 만들기 위해, 사용할 클래스와 메서드의 이름을 결정해야 하며, 메서드를 실행할 때 사용할 인자의 타입과 개수를 결정해야 한다.

따라서 가장 먼저 고민해야할 것은 테스트 대상이 될 클래스의 이름이다. 그리고 테스트 대상이 되는 타입의 이름을 결정한 뒤에는 테스트 코드에서 호출할 메서드를 고민한다.

그리고 나서 실행 결과를 검증해야 한다. 검증을 위해 실행 결과를 어떻게 검증할 수 있는지 고민해야 한다. 지금까지는 리턴 값을 이용해서 검증하므로 이 메서드의 리턴 타입을 고민했다. 단순히 0, 1, 2와 같은 int 타입을 이용해 암호 강도를 표현할 지 아니면 열거 타입을 추가할 지 고민하여 진행하였다.

TDD 자체가 설계는 아니지만, 위처럼 TDD를 하다보면 테스트 코드를 작성하는 과정에서 일부 설계를 진행하게 된다.



#### 필요한 만큼 설계하기

TDD는 테스트를 통과할 만큼만 코드를 작성한다. 필요할 것으로 예측해서 미리 코드를 만들지 않는다. 이는 설계에도 동일하게 적용된다. 필요할 것으로 예측해서 미리 설계를 유연하게 만들지 않는다. 실제 테스트 사례를 추가하고 통과시키는 과정에서 필요한 만큼 설계를 변경한다.



#### 기능 명세 구체화

테스트 코드를 작성하기 위해 개발자는 기능 명세를 정리해야 한다. 보통 개발자는 기획자가 작성한 스토리보드나 와이어프레임과 같은 형태로 요구사항 명세를 전달받는다. 이런 문서는 사용자가 기획자가 보이에는 적당할지 모르나 개발자가 기능을 구현하기엔 생략된 내용이 많다.

테스트 사례를 추가하는 과정에서 구현하기 애매한점을 미리 발견하게 된다. 이미 입력과 결과를 비교해야 하므로, 그런 점을 발견하면 구체적으로 정리해야 한다.

이전에 만료일 계산기능을 할 때, 요구사항이 다음과 같다고 해보자.

- 서비스를 사용하려면 매달 1만원을 선불로 납부한다. 납부일 기준으로 한 달 뒤가 서비스 만료일이 된다.
- 2개월 이상 요금을 납부할 수 있다.
- 10만원을 납부하면 서비스를 1년 제공한다.

테스트를 작성하려면 개발자는 한 달 뒤에 대한 정확한 예가 필요하다.

앞서 했듯, 1월 31일에 납부하면 한 달뒤가 언제일까? 2월 28일일까? 30일 뒤인 3월 2일일까?

윤년인경우는? 이외에도 우리가 고려한 테스트 케이스들이 그 예가 될 것이다.

또한 테스트 코드는 바로 실행할 수 있다. 이를 이용하면 구체적인 예를 이용해서 기능을 바로 실행해 볼 수 있다. 이는 유지보수에 큰 도움이 된다. 특정 상황에서 코드가 어떻게 동작하는지 이해하고 싶다면 해당 상황을 검증하는 테스트를 실행하고 코드를 추적하면 된다.